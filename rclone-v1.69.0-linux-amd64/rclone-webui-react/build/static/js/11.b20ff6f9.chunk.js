(this["webpackJsonp@rclone/rclone-webui-react"]=this["webpackJsonp@rclone/rclone-webui-react"]||[]).push([[11],{278:function(e,t,a){"use strict";var r=a(3);r.oneOfType([r.shape({Features:r.object.isRequired,Hashes:r.array.isRequired,Name:r.string.isRequired,Precision:r.number.isRequired,String:r.string.isRequired}),r.object]),r.shape({remoteName:r.string.isRequired,remotePath:r.string.isRequired}),r.string,r.bool,r.bool,r.shape({Path:r.string.isRequired,Name:r.string.isRequired,Size:r.number,MimeType:r.string,ModTime:r.string.isRequired,IsDir:r.bool.isRequired}),r.shape({rate:r.string.isRequired})},279:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"h",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"l",(function(){return m})),a.d(t,"k",(function(){return d})),a.d(t,"j",(function(){return h})),a.d(t,"i",(function(){return u})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"n",(function(){return E})),a.d(t,"m",(function(){return f})),a.d(t,"e",(function(){return b}));var r=a(2),n=a(282);const o=(e,t,a)=>n=>{n({type:r.j,id:e,remoteName:t,remotePath:a}),n(s(e))},l=(e,t)=>a=>{a({type:r.k,remoteName:t,id:e,remotePath:""}),a(s(e))},s=e=>(t,a)=>{const r=a(),{remoteName:o,remotePath:l}=r.explorer.currentPaths[e];o&&""!==o&&t(Object(n.e)(o,l))},i=(e,t)=>a=>{a({type:r.l,id:e,remotePath:t}),a(s(e))},c=e=>t=>{t({type:r.q,id:e})},m=e=>t=>{t({type:r.I,id:e})},d=e=>t=>{t({type:r.F,id:e}),t(s(e))},h=e=>t=>{t({type:r.E,id:e}),t(s(e))},u=e=>t=>{t({type:r.D,id:e}),t(s(e))},p=(e,t)=>a=>{a({type:r.o,id:e,filter:t})},g=(e,t)=>a=>{a({type:r.f,id:e,mode:t})},E=(e,t)=>a=>{a({type:r.m,id:e,searchQuery:t})},f=(e,t)=>a=>{a({type:r.i,id:e,payload:t})},b=(e,t,a)=>n=>{n({type:r.n,id:e,payload:{sortFilter:t,sortFilterAscending:a}})}},282:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"g",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"h",(function(){return h})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return p}));var r=a(2),n=a(63),o=a(279),l=a(284);const s=e=>t=>{Object(l.getRemoteInfo)(e).then(a=>{t({type:r.v,status:r.L,payload:{[e.split(":")[0]]:a}})},e=>t({type:r.v,status:r.J,payload:e}))},i=()=>(e,t)=>{Object(l.getAllRemoteNames)().then(t=>e({type:r.A,status:r.L,payload:t.remotes}),t=>e({type:r.A,status:r.J,payload:t}))},c=(e,t)=>a=>{if(""!==e){const n="".concat(e,"-").concat(t);Object(l.getFilesList)(e,t).then(e=>a({type:r.w,status:r.L,payload:{path:n,filesList:e.list}}),e=>a({type:r.w,status:r.J,payload:{path:n,error:e}}))}},m=(e,t)=>a=>{if(!e||e<0)throw new Error("Invalid number of cols:".concat(e));a({type:r.h,payload:{numCols:e,mode:t}})},d=e=>t=>{const a=Object(n.l)(3);t(Object(o.g)(a)),t(u(a,e)),t({type:r.a,payload:{containerID:a,paneID:e}})},h=(e,t)=>a=>{a(Object(o.l)(e)),a({type:r.G,payload:{containerID:e,paneID:t}})},u=(e,t)=>a=>{a({type:r.b,payload:{containerID:e,paneID:t}})},p=e=>t=>{t({type:r.e,payload:e})}},345:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(331),l=a.n(o);const s=(e,t)=>{const a=t.trim().toLowerCase(),r=a.length;return 0===r?e:0===r?[]:e.filter(e=>e.toLowerCase().slice(0,r)===a)},i=e=>e,c=e=>n.a.createElement("div",null,n.a.createElement("i",{className:"fa fa-lg fa-hdd-o"})," ",e);class m extends n.a.Component{constructor(e){super(e),this.onSuggestionsFetchRequested=e=>{let{value:t}=e;this.setState({suggestions:s(this.props.suggestions,t)})},this.onSuggestionsClearRequested=()=>{this.setState({suggestions:[]})},this.state={suggestions:[]}}render(){const{value:e,onChange:t}=this.props,a={placeholder:"Type the name of remote you want to open",value:e,onChange:t};return n.a.createElement(l.a,{suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:i,renderSuggestion:c,alwaysRenderSuggestions:!0,highlightFirstSuggestion:!0,inputProps:a,style:{width:"100%"}})}}var d=m,h=a(87),u=a(282),p=a(279),g=a(294),E=a(43),f=a(296);a(278);class b extends n.a.Component{constructor(e){super(e),this.shouldUpdateRemoteName=(e,t)=>{let{newValue:a}=t;0===a.indexOf("/")?this.setState({remoteName:a,openButtonText:"Open local path"}):this.setState({remoteName:a,openButtonText:"Open"})},this.openRemote=e=>{e.preventDefault();const{handleChangeRemoteName:t}=this.props,{remoteName:a}=this.state;t(a)},this.state={isEmpty:!1,remoteName:e.remoteName,openEnabled:!1,openButtonText:"Open"}}componentDidMount(){this.props.getRemoteNames()}render(){const{isEmpty:e,remoteName:t}=this.state,{remotes:a}=this.props,{hasError:r}=this.props;return r?n.a.createElement("div",null,"Error loading remotes. Please try again."):e?n.a.createElement("div",null,"Add some remotes to see them here ",n.a.createElement("span",{role:"img","aria-label":"sheep"},"\ud83d\udc11"),"."):n.a.createElement(g.a,{onSubmit:this.openRemote,className:"row"},n.a.createElement(E.a,{xs:12,sm:10,lg:10},n.a.createElement(d,{value:t,onChange:this.shouldUpdateRemoteName,suggestions:a})),n.a.createElement(E.a,{xs:12,sm:2,lg:2},n.a.createElement(f.a,{className:"btn-lg",color:"success"},this.state.openButtonText)))}}b.defaultProps={};t.a=Object(h.b)((e,t)=>({remotes:e.remote.remotes,hasError:!1,error:e.remote.error,currentPath:e.explorer.currentPaths[t.containerID]}),{getRemoteNames:u.g,getFsInfo:u.f,changeRemoteName:p.c})(b)},560:function(e,t){e.exports="data:image/png;base64,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"},561:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAABYCAYAAABRVa2MAAAABHNCSVQICAgIfAhkiAAAA1FJREFUeF7tlMFNJUEMBZcgNgjyz4XNAYIAiROHFaUy+nLTqrnasnrqld7Ty+v7+5++CPxyAk+J/MsT7PmfBBI5Ea4gkMhXxNhPJHIOXEEgka+IsZ9I5By4gkAiXxFjP5HIOXAFgUS+IsZ+IpFz4AoCiXxFjP1EIufAFQQS+YoY+4lEzoErCCTyFTH2Ez8W+flvEL8S+Pf2PY94/Z8PcSPLEpkIyTkFksiJLJXaWU/kGXfiRldrZCIk5xRIjVwjS6V21hN5xp240dUamQjJOQVSI9fIUqmd9USecSdudLVGJkJyToHUyDWyVGpnPZFn3IkbXa2RiZCcUyA1co0sldpZT+QZd+JGV2tkIiTnFEiNXCNLpXbWE3nGnbjR1RqZCMk5BVIj18hSqZ31RJ5xJ250tUYmQnJOgdTINbJUamc9kWfciRtdrZGJkJxTIDVyjSyV2llP5Bl34kZXa2QiJOcUSI1cI0uldtYTecaduNHVGpkIyTkFUiPXyFKpnfVEnnEnbnS1RiZCck6B1Mg1slRqZz2RZ9yJG12tkYmQnFMgNXKNLJXaWU/kGXfiRldrZCIk5xRIjVwjS6V21hN5xp240dUamQjJOQVSI9fIUqmd9USecSdudLVGJkJyToHUyDWyVGpnPZFn3IkbXa2RiZCcUyA1co0sldpZT+QZd+JGV2tkIiTnFEiNXCNLpXbWE3nGnbjR1RqZCMk5BVIj18hSqZ31RJ5xJ250tUYmQnJOgdTINbJUamc9kWfciRtdrZGJkJxTIDVyjSyV2llP5Bl34kZXa2QiJOcUSI1cI0uldtYTecaduNHVGpkIyTkFUiPXyFKpnfVEnnEnbnS1RiZCck6B1Mg1slRqZz2RZ9yJG12tkYmQnFMgNXKNLJXaWU/kGXfiRldrZCIk5xRIjVwjS6V21hN5xp240dUamQjJOQVSI9fIUqmd9USecSdudLVGJkJyToHUyIc2ssy59Qg8hMCPG/khr+poBCSBRJbAWj+TQCKfmUuvkgQSWQJr/UwCiXxmLr1KEkhkCaz1Mwkk8pm59CpJIJElsNbPJJDIZ+bSqySBRJbAWj+TQCKfmUuvkgQSWQJr/UwCiXxmLr1KEkhkCaz1Mwkk8pm59CpJ4AOLvinHBVNx8QAAAABJRU5ErkJggg=="},562:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAABYCAYAAABYvg32AAAABHNCSVQICAgIfAhkiAAAA11JREFUeF7tlMFJhWEMBLUIi7D/XrQHLUJB8OLBYQkxMcy7Jrz83+ywjy9vHx8P/iRwjMCjYh9L1Od8EVBsRThJQLFPxuqjFFsHThJQ7JOx+ijF1oGTBBT7ZKw+SrF14CQBxT4Zq49SbB04SUCxT8bqoxRbB04SUOyTsfooxdaBkwQU+2SsPqos9vPT/4L4+v779/6393y/5tq76D1knWL/IKTYpMzfzBU75EzAFDsE2rROOdFZG9vGJkdG5oodYidgNnYItGmdcqKzNraNTY6MzBU7xE7AbOwQaNM65URnbWwbmxwZmSt2iJ2A2dgh0KZ1yonO2tg2NjkyMlfsEDsBs7FDoE3rlBOdtbFtbHJkZK7YIXYCZmOHQJvWKSc6a2Pb2OTIyFyxQ+wEzMYOgTatU0501sa2scmRkblih9gJmI0dAm1ap5zorI1tY5MjI3PFDrETMBs7BNq0TjnRWRvbxiZHRuaKHWInYDZ2CLRpnXKisza2jU2OjMwVO8ROwGzsEGjTOuVEZ21sG5scGZkrdoidgNnYIdCmdcqJztrYNjY5MjJX7BA7AbOxQ6BN65QTnbWxbWxyZGSu2CF2AmZjh0Cb1iknOmtj29jkyMhcsUPsBMzGDoE2rVNOdNbGtrHJkZG5YofYCZiNHQJtWqec6KyNbWOTIyNzxQ6xEzAbOwTatE450Vkb28YmR0bmih1iJ2A2dgi0aZ1yorM2to1NjozMFTvETsBs7BBo0zrlRGdtbBubHBmZK3aInYDZ2CHQpnXKic7a2DY2OTIyV+wQOwGzsUOgTeuUE521sW1scmRkrtghdgJmY4dAm9YpJzprY9vY5MjIXLFD7ATMxg6BNq1TTnTWxraxyZGRuWKH2AmYjR0CbVqnnOisjW1jkyMjc8UOsRMwGzsE2rROOdFZG9vGJkdG5oodYidgNnYItGmdcqKzNraNTY6MzBU7xE7AbOwQaNM65URnbWwbmxwZmY+LPfJqj0oACJQbW8IS2EhAsTem4jeVCSh2GaF/sJGAYm9MxW8qE1DsMkL/YCMBxd6Yit9UJqDYZYT+wUYCir0xFb+pTECxywj9g40EFHtjKn5TmYBilxH6BxsJKPbGVPymMgHFLiP0DzYSUOyNqfhNZQKKXUboH2wk8AmzzJnHLKUNUAAAAABJRU5ErkJggg=="},566:function(e,t){},635:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAABHNCSVQICAgIfAhkiAAAAQhJREFUWEftlm0NwjAQhp8pAAdYQAI4wAHgAJQADpCAA0ABSEACEsiRlYym3W7LNTSk92tZbtdn7330KjKwKgMGCoTLQrZKrIBJR608gYNVPflKHIGlMrj4rpW+rW5NiClw6xnUBKQJMQPOPSHE/Q5IerR28lNpAaE9vOm3Bfah7hiqxBCIKyDnve1XSiSFmNc/J0W+a5EoKYRTtiu1BcJlyFQJVwMu+KV+GANSF878GjGF0F6Afo38H4TfhaU7/Alc5oT2MjPtDu2hvl8UQgbMAxgNjdzjO9lPN6GrXN4tAFnZUoKICnLOZxuLTTwZs6KMtQVXQe3YtYb5ilcgYoWZVPZY8CzS8QIbSj0iD+quAwAAAABJRU5ErkJggg=="},658:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(62),l=a(296),s=a(43),i=a(87),c=a(279),m=a(282),d=a(89),h=a(560),u=a.n(h),p=a(561),g=a.n(p),E=a(562),f=a.n(E),b=a(642),I=a(640),C=a(641);var N=Object(i.b)((e,t)=>({containers:e.remote.containers,numContainers:e.remote.numContainers,currentPaths:e.explorer.currentPaths,activeRemoteContainerID:e.remote.activeRemoteContainerID}),{addRemoteContainer:m.a,removeRemoteContainer:m.h,changeActiveRemoteContainer:m.b})((function(e){const{addRemoteContainer:t,removeRemoteContainer:a,changeActiveRemoteContainer:r,activeRemoteContainerID:o}=e,{containers:s,currentPaths:i,paneID:c}=e,m=o?o[c]:"";return n.a.createElement(b.a,{tabs:!0,className:"d-flex"},s.map(e=>{let{ID:t,paneID:o}=e;if(c===o){const e=t===m;return n.a.createElement(I.a,{key:"TAB_"+t,className:"pl-0 pr-0 custom-tab "+(e?"tab-active":"")},n.a.createElement(C.a,{className:"float-center",onClick:()=>r(t,o)},n.a.createElement("i",{className:"fa fa-folder-o pr-1"}),n.a.createElement("span",{className:"overflow-hidden"},i[t]&&""!==i[t].remoteName?i[t].remoteName:"Open New"),n.a.createElement(l.a,{className:"btn-no-background btn btn-secondary p-0 pl-1 pr-2 ml-2",onClick:e=>{e.stopPropagation(),a(t,o)}},n.a.createElement("i",{className:"fa fa-lg fa-close"}))))}return null}),n.a.createElement(I.a,{key:"ADD_BUTTON",className:"pl-0 pr-0"},n.a.createElement(C.a,{className:"float-center",onClick:()=>t(c)},n.a.createElement("i",{className:"fa fa-lg fa-plus"}))))})),A=a(306),y=a(307),k=a(272),F=a(64),w=a(651),S=a(378),D=a(351),R=a(302),P=a(450);const O="FileComponent";var v=a(63),U=a(36),x=(a(278),a(665)),M=a(27),B=a(35),j=a(563),T=a.n(j);class L extends n.a.Component{error(){console.log("error")}render(){const{options:e}=this.props;return n.a.createElement(T.a,{options:e,error:this.error})}}var V=function(e){let{playbackURL:t,MimeType:a}=e;const[o,s]=Object(r.useState)(!0);function i(e){e.stopPropagation(),s(!o)}let c;if(o)c=n.a.createElement("div",{className:"img-thumbnail w-100 text-center","data-test":"videoPlayerWidget"},n.a.createElement(l.a,{color:"link",onClick:i},n.a.createElement("i",{className:"fa fa-play-circle fa-4x"})));else{const e=t.substring(0,t.lastIndexOf("."))+".vtt";console.log(e);const r={options:{sources:[{type:a,src:t}],subtitles:[{language:"en",url:e,label:"EN"}]}};c=M.createPortal(n.a.createElement(x.a,{className:"task-modal d-none d-sm-block","data-test":"videoPlayerWidget",isOpen:!o,toggle:i},n.a.createElement(L,r)),document.getElementById(B.e))}return n.a.createElement(d.a,null,c)},Q=a(548),J=a(2);var H=Object(i.b)((e,t)=>{const{downloadURL:a}=t;return{imageData:e.imageLoader[a]}},{downloadImage:e=>t=>{if(!e)throw new Error("Cannot have null url");t({type:J.C,status:J.K,payload:{url:e}}),F.a.get(e,{responseType:"arraybuffer"}).then(a=>{console.log(a);const r=new Blob([a.data]),n=URL.createObjectURL(r);t({type:J.C,status:J.L,payload:{url:e,data:n}})},a=>{t({type:J.C,status:J.J,payload:{url:e,error:a}})})}})((function(e){let{downloadURL:t,inViewport:a,imageData:i,downloadImage:c,currentPath:m}=e;const[d,h]=Object(r.useState)(!0),[u,p]=Object(r.useState)(0);function g(e){e.stopPropagation(),h(!d)}if(Object(r.useEffect)(()=>{a&&t&&!i&&c(t)}),d)return n.a.createElement("div",{onClick:g,"data-test":"toggleModal"},!i||i.isLoading?n.a.createElement(w.a,null,"Loading..."):n.a.createElement("img",{className:"img-thumbnail pd-0 m-0 -rotate-90",src:i.data,alt:""}));{const e=n.a.createElement("button",{className:"close",style:{position:"absolute",top:"15px",right:"15px"},onClick:g},n.a.createElement("i",{className:"fa fa-close fa-inverse"}));return M.createPortal(n.a.createElement(x.a,{className:"image-modal",isOpen:!d,toggle:g,external:e},n.a.createElement(k.a,{fluid:!0},n.a.createElement(o.a,null,n.a.createElement(s.a,{lg:8},n.a.createElement("img",{className:"rotatableImage img-thumbnail pd-0 m-0 "+(0!==u?"rotate"+u:""),src:i.data,alt:""})),n.a.createElement(s.a,{lg:4},n.a.createElement(A.a,null,n.a.createElement(Q.a,null,"Operations"),n.a.createElement(y.a,null,n.a.createElement(o.a,null,n.a.createElement(l.a,{color:"link",onClick:function(){p(u>0?(u-90)%360:(360-u-90)%360)}},n.a.createElement("i",{className:"fa fa-rotate-left"})),n.a.createElement(l.a,{color:"link",onClick:function(){p((u+90)%360)}},n.a.createElement("i",{className:"fa fa-rotate-right"}))))))))),document.getElementById(B.e))}}));var Z=function(e){let{playbackURL:t,MimeType:a}=e;const[o,s]=Object(r.useState)(!0);function i(e){e.stopPropagation(),s(!o)}let c;return c=o?n.a.createElement("div",{className:"img-thumbnail w-100 text-center","data-test":"audioPlayerWidget"},n.a.createElement(l.a,{color:"link",onClick:i},n.a.createElement("audio",{controls:!0},n.a.createElement("source",{src:t,type:a}),"Your browser does not support the audio tag."))):M.createPortal(n.a.createElement(x.a,{className:"task-modal d-none d-sm-block","data-test":"videoPlayerWidget",isOpen:!o,toggle:i},n.a.createElement("audio",{controls:!0},n.a.createElement("source",{src:t,type:a}),"Your browser does not support the audio tag.")),document.getElementById(B.e)),n.a.createElement(d.a,null,c)};function q(e){return{"image/jpeg":"Image","video/mp4":"Video","video/webm":"Video","audio/webm":"Audio","video/ogg":"Video","application/ogg":"Unspecified","audio/mpeg":"Audio","audio/wav":"Audio","audio/mp4":"Audio"}[e]}class Y extends n.a.Component{constructor(){super(...arguments),this.getRenderForItem=()=>{const{fsInfo:e,item:t,inViewport:a,currentPath:r}=this.props,{remoteName:o,remotePath:l}=r,{MimeType:s}=t;let i="";const c=localStorage.getItem(B.c);switch(i=e.Features.BucketBased?c+"[".concat(o,"]/").concat(l,"/").concat(t.Name):c+"[".concat(o,":").concat(l,"]/").concat(t.Name),s){case"image/jpeg":return n.a.createElement(H,{item:t,downloadURL:i,inViewport:a});case"video/mp4":case"video/webm":case"audio/webm":case"video/ogg":case"application/ogg":return n.a.createElement(V,{playbackURL:i,MimeType:s,currentPath:r});case"audio/mpeg":case"audio/wav":case"audio/mp4":return n.a.createElement(Z,{playbackURL:i,MimeType:s});default:return null}}}render(){const{loadMedia:e,item:t}=this.props,{MimeType:a}=t;let r=q(a)&&e?this.getRenderForItem():null;return n.a.createElement(d.a,null,r)}}var G=Object(i.b)((e,t)=>{const a=e.explorer.currentPaths[t.containerID],r=e.explorer.loadImages[t.containerID];let n={};const{remoteName:o}=a;if(a&&e.remote.configs){const t=o.split(":")[0];e.remote.configs[t]&&(n=e.remote.configs[t])}return{currentPath:a,fsInfo:n,loadMedia:r}},{})(Y),X=a(652),z=a(668),K=a(653),W=a(655);var _=function(e){let{downloadHandle:t,deleteHandle:a,item:r,linkShareHandle:o}=e;const{IsDir:s}=r;return n.a.createElement("div",{"data-test":"fileActionsComponent"},!s&&n.a.createElement(l.a,{color:"link",onClick:()=>t(r),"data-test":"btn-download"},n.a.createElement("i",{className:"fa fa-cloud-download fa-lg d-inline"})),n.a.createElement(l.a,{color:"link"},n.a.createElement("i",{className:"fa fa-info-circle"})),n.a.createElement(X.a,null,n.a.createElement(z.a,{color:"link"},n.a.createElement("i",{className:"fa fa-ellipsis-v"})),n.a.createElement(K.a,null,n.a.createElement(W.a,{header:!0},"Actions"),n.a.createElement(W.a,{"data-test":"btn-share-with-link",onClick:()=>o(r)},n.a.createElement("i",{className:"fa fa-share fa-lg d-inline"})," Share with link"),n.a.createElement(W.a,{divider:!0}),n.a.createElement(W.a,{"data-test":"btn-delete-item",onClick:()=>((e,t)=>{window.confirm("Are you sure you want to delete ".concat(t.Name))&&e(t)})(a,r)},n.a.createElement("i",{className:"fa fa-remove fa-lg d-inline text-danger"})," Delete "))))};const $={"application/pdf":"fa-file-pdf-o","image/jpeg":"fa-file-image-o","application/rar":"fa-file-archive-o","application/x-rar-compressed":"fa-file-archive-o","application/zip":"fa-file-archive-o","text/plain":"fa-file-text-o","text/x-vcard":"fa-address-card-o"};var ee=function(e){let{IsDir:t,MimeType:a}=e,r=$[a];return t&&(r="fa-folder"),r||(r="fa-file"),n.a.createElement("i",{className:r+" fa fa-lg","data-test":"fileIconComponent"})};const te={canDrag:e=>!0,beginDrag(e){const{Name:t,Path:a,IsDir:r}=e.item;return{Name:t,Path:a,IsDir:r,remoteName:e.remoteName,remotePath:e.remotePath}},endDrag(e,t,a){console.log(e,"Component:",a);try{t.getDropResult()&&a&&async function(e){const{srcRemoteName:t,srcRemotePath:a,destRemoteName:r,destRemotePath:n,Name:o,IsDir:l,dropEffect:s,updateHandler:i}=e;"move"===s?(await Object(F.b)(t,a,r,n,o,l),i(),l?U.b.info("Directory copying started in background: ".concat(o)):U.b.info("File copying started in background: ".concat(o))):(await Object(F.c)(t,a,r,n,o,l),i(),U.b.info("Directory moving started in background: ".concat(o)))}(t.getDropResult())}catch(r){const e=r.response?r.response:r;console.log(JSON.stringify(e)),U.b.error("Error copying file(s). ".concat(e),{autoClose:!1})}}};class ae extends n.a.Component{handleClick(e,t,a,r){e&&t(a,r)}render(){const{containerID:e,inViewport:t,item:a,loadImages:r,clickHandler:o,downloadHandle:l,linkShareHandle:s,deleteHandle:i,connectDragSource:c,gridMode:m}=this.props,{IsDir:h,MimeType:u,ModTime:p,Name:g,Size:E}=a;let f,b=new Date(p);return f=c("card"===m?n.a.createElement("div",{className:h?"":"col-md-4"},n.a.createElement(A.a,null,n.a.createElement(y.a,{onClick:e=>this.handleClick(h,o,e,a)},r&&q(u)?n.a.createElement(G,{containerID:e,item:a,inViewport:t}):n.a.createElement(ee,{IsDir:h,MimeType:u}),g),n.a.createElement(P.a,null,n.a.createElement(_,{downloadHandle:l,linkShareHandle:s,deleteHandle:i,item:a})))):n.a.createElement("tr",{className:"pointer-cursor fadeIn"},n.a.createElement("td",{onClick:e=>o(e,a)},n.a.createElement(ee,{IsDir:h,MimeType:u})," ",g),n.a.createElement("td",null,-1===E?"-":Object(v.g)(E,2)),n.a.createElement("td",{className:"d-none d-md-table-cell"},b.toLocaleDateString()),n.a.createElement("td",null,n.a.createElement(_,{downloadHandle:l,linkShareHandle:s,deleteHandle:i,item:a})))),n.a.createElement(d.a,null,f)}}var re=Object(R.DragSource)(O,te,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(ae),ne=a(42),oe=a(648),le=a(649),se=a(288),ie=a(650);class ce extends n.a.Component{constructor(e){super(e),this.copyToClipboard=()=>{let e=document.createElement("textarea");e.innerText=this.props.linkUrl,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()},this.handleFocus=e=>e.target.select(),this.state={copySuccess:""},this.toggle=this.toggle.bind(this)}toggle(){this.props.closeModal()}render(){const{isVisible:e,linkUrl:t}=this.props,{copySuccess:a}=this.state;let r=!document||!document.queryCommandSupported||document.queryCommandSupported("copy");return n.a.createElement("div",null,n.a.createElement(x.a,{isOpen:e,toggle:this.toggle},n.a.createElement(oe.a,{toggle:this.toggle,"data-test":"modalHeader"},"Public link generated."),n.a.createElement(le.a,{"data-test":"modalBody"},n.a.createElement(se.a,{readOnly:!0,value:t,onFocus:this.handleFocus}),r&&n.a.createElement("div",null,n.a.createElement(l.a,{color:"link",onClick:this.copyToClipboard},n.a.createElement("i",{className:"fa fa-clipboard fa-2x"}))),a),n.a.createElement(ie.a,{"data-test":"modalFooter"},n.a.createElement(l.a,{color:"primary",onClick:this.toggle},"Done")," ")))}}ce.defaultProps={isVisible:!0};var me=ce;var de=function(e){let{height:t,children:a}=e;return n.a.createElement("div",{style:{overflow:"auto",height:t}},a)},he=a(284),ue=a(420);var pe=e=>n.a.createElement("div",{"data-test":"dropOverlay",style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1,opacity:.5,backgroundColor:"gray"}});const ge={drop(e,t,a){if(t.didDrop())return;let{Name:r,Path:n,IsDir:o,remoteName:l}=t.getItem();return{srcRemoteName:Object(v.a)(l),srcRemotePath:n,destRemoteName:Object(v.a)(e.currentPath.remoteName),destRemotePath:e.currentPath.remotePath,Name:r,IsDir:o,updateHandler:a.updateHandler}},canDrop(e,t){const{remoteName:a,remotePath:r}=t.getItem(),n=e.currentPath.remoteName,o=e.currentPath.remotePath;return n!==a||o!==r}};class Ee extends n.a.PureComponent{constructor(e){super(e),this.closeLinkShareModal=()=>{this.setState({showLinkShareModal:!1})},this.showLinkShareModal=()=>{this.setState({showLinkShareModal:!0})},this.updateHandler=()=>{this.getFilesList()},this.dismissAlert=e=>{this.setState({isDownloadProgress:!1})},this.linkShareHandle=e=>{const{fsInfo:t}=this.props;if(t.Features.PublicLink){const{remoteName:t}=this.props.currentPath;Object(he.createNewPublicLink)(t,e.Path).then(e=>{this.setState({generatedLink:e.url,showLinkShareModal:!0})},e=>{U.b.error("Error Generating link: "+e)})}else U.b.error("This remote does not support public link")},this.getFileComponents=e=>{const{files:t,containerID:a,gridMode:r,fsInfo:o,loadImages:l}=this.props,{remoteName:s,remotePath:i}=this.props.currentPath;if(o&&!Object(v.j)(o))return t.reduce((t,c)=>{let{ID:m,Name:d}=c;return void 0===m&&(m=d),c.IsDir===e&&t.push(n.a.createElement(re,{key:m,item:c,clickHandler:this.handleFileClick,downloadHandle:this.downloadHandle,deleteHandle:this.deleteHandle,remoteName:s,remotePath:i,gridMode:r,containerID:a,linkShareHandle:this.linkShareHandle,loadImages:l,isBucketBased:o.Features.BucketBased,canCopy:o.Features.Copy,canMove:o.Features.Move,itemIdx:1})),t},[])},this.applySortFilter=e=>{const{changeSortFilter:t,containerID:a}=this.props;return this.props.sortFilter===e?t(a,e,!0!==this.props.sortFilterAscending):t(a,e,!0)},this.state={isLoading:!1,isDownloadProgress:!1,downloadingItems:0,shouldUpdate:!0,showLinkShareModal:!1,generatedLink:""},this.handleFileClick=this.handleFileClick.bind(this),this.downloadHandle=this.downloadHandle.bind(this),this.deleteHandle=this.deleteHandle.bind(this)}handleFileClick(e,t){const{Path:a,IsDir:r,IsBucket:n}=t;r||n?this.updateRemotePath(a,r,n):this.downloadHandle(t)}updateRemotePath(e,t,a){const{remoteName:r}=this.props.currentPath;let n="",o="";a?(n=Object(v.a)(r)+e,o=""):t&&(n=r,o=e),this.props.changePath(this.props.containerID,n,o)}getFilesList(){const{remoteName:e,remotePath:t}=this.props.currentPath;this.props.getFiles(e,t)}async downloadHandle(e){let{remoteName:t,remotePath:a}=this.props.currentPath;const{fsInfo:r}=this.props;let n="";n=r.Features.BucketBased?"/[".concat(t,"]/").concat(a,"/").concat(e.Name):"/[".concat(t,":").concat(a,"]/").concat(e.Name),this.setState(e=>({downloadingItems:e.downloadingItems+1,isDownloadProgress:!0}));let o=await Object(F.a)({url:n,method:"GET",responseType:"blob"});const l=window.URL.createObjectURL(new Blob([o.data])),s=document.createElement("a");s.href=l,s.setAttribute("download",e.Name),document.body.appendChild(s),s.click(),this.setState(e=>({downloadingItems:e.downloadingItems-1}),()=>{0===this.state.downloadingItems&&this.setState({isDownloadProgress:!1})})}async deleteHandle(e){let{remoteName:t}=this.props.currentPath;try{e.IsDir?(await Object(he.purgeDir)(t,e.Path),this.updateHandler(),U.b.info("".concat(e.Name," deleted."))):(await Object(he.deleteFile)(t,e.Path),this.updateHandler(),U.b.info("".concat(e.Name," deleted."),{autoClose:!0}))}catch(a){U.b.error("Error deleting file. ".concat(a),{autoClose:!1})}}render(){const{isLoading:e,isDownloadProgress:t,downloadingItems:a,generatedLink:r,showLinkShareModal:l}=this.state,{connectDropTarget:i,isOver:c,files:m,gridMode:h,canDrop:u,sortFilter:p,sortFilterAscending:g}=this.props,{remoteName:E}=this.props.currentPath;if(e||!m)return n.a.createElement("div",null,n.a.createElement(w.a,{color:"primary"})," Loading");{if(""===E)return n.a.createElement("div",null,"No remote is selected. Select a remote from above to show files.");let e=this.getFileComponents(!0),f=this.getFileComponents(!1),b="";if("card"===h)b=n.a.createElement(k.a,{fluid:!0},n.a.createElement(o.a,null,n.a.createElement(s.a,{lg:3},n.a.createElement("h3",null,"Directories"),n.a.createElement(de,{height:B.b},e)),n.a.createElement(s.a,{lg:9},n.a.createElement("h3",null,"Files"),n.a.createElement(de,{height:B.b},n.a.createElement(o.a,null,f)))));else{let t="fa fa-lg fa-arrow-down";g&&(t="fa fa-lg fa-arrow-up"),b=n.a.createElement(k.a,{fluid:!0,className:"p-0"},n.a.createElement(de,{height:B.b},n.a.createElement(S.a,{className:"table table-responsive-sm table-striped table-fix-head"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"pointer-cursor",onClick:()=>this.applySortFilter("name")},"Name ","name"===p&&n.a.createElement("i",{className:t})),n.a.createElement("th",{className:"pointer-cursor",onClick:()=>this.applySortFilter("size")},"Size ","size"===p&&n.a.createElement("i",{className:t})),n.a.createElement("th",{className:"d-none d-md-table-cell pointer-cursor",onClick:()=>this.applySortFilter("modified")},"Modified ","modified"===p&&n.a.createElement("i",{className:t})),n.a.createElement("th",null,"Actions"))),n.a.createElement("tbody",null,m.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:4},"Directories")),e,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:4},"Files")),f):n.a.createElement("tr",null,n.a.createElement("th",{colSpan:4},"Files"))))))}return i(n.a.createElement("div",{className:"row"},c&&u&&n.a.createElement(pe,null),n.a.createElement(d.a,null,n.a.createElement(D.a,{color:"info",isOpen:t,toggle:this.dismissAlert,sm:12,lg:12},"Downloading ",a," file(s). Please wait."),b,n.a.createElement(me,{closeModal:this.closeLinkShareModal,isVisible:l,linkUrl:r}))))}}}Ee.defaultProps={};const fe=Object(ue.a)((e,t)=>t.containerID,(e,t)=>e.explorer.currentPaths[t.containerID],(e,t)=>e.explorer.visibilityFilters[t.containerID],(e,t)=>e.explorer.sortFilters[t.containerID],(e,t)=>e.explorer.searchQueries[t.containerID],(e,t)=>e.explorer.sortFiltersAscending[t.containerID],(e,t)=>e.remote.files["".concat(e.explorer.currentPaths[t.containerID].remoteName,"-").concat(e.explorer.currentPaths[t.containerID].remotePath)],(e,t,a,r,n,o,l)=>(l=l.files,a&&""!==a&&(l=Object(v.d)(l,a)),n&&(l=Object(v.e)(l,n)),l.sort(Object(v.h)(r,o)),l));var be=Object(ne.c)(Object(i.b)((e,t)=>{const{currentPaths:a,gridMode:r,searchQueries:n,loadImages:o,sortFilters:l,sortFiltersAscending:s}=e.explorer,{containerID:i}=t,c=a[i],m=r[i],d=n[i],h=o[i],u=l[i],p=s[i];let g={};const{remoteName:E,remotePath:f}=c;if(c&&e.remote.configs){const t=E.split(":")[0];e.remote.configs[t]&&(g=e.remote.configs[t])}const b="".concat(E,"-").concat(f);let I=e.remote.files[b];return I&&(I=fe(e,t)),{files:I,currentPath:c,fsInfo:g,gridMode:m,searchQuery:d,loadImages:h,sortFilter:u,sortFilterAscending:p}},{getFiles:m.e,navigateUp:c.k,changePath:c.b,changeSortFilter:c.e}),Object(R.DropTarget)(O,ge,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})))(Ee),Ie=a(662),Ce=a(294),Ne=a(597),Ae=a(375),ye=a(376),ke=a(45);class Fe extends n.a.Component{constructor(e){super(e),this.disableForm=e=>{this.setState({disableForm:e})},this.changeName=e=>{const t=e.target.value;this.setState({name:t})},this.state={name:"",disableForm:!1},this.createNewFolder=this.createNewFolder.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.toggle=this.toggle.bind(this)}async createNewFolder(){let{name:e}=this.state,{remoteName:t,remotePath:a}=this.props.currentPath;const{fsInfo:r}=this.props;t=Object(v.a)(t);try{r.Features.BucketBased&&""===a?t+=e:""===a?a=e:a+="/"+e;const n={fs:t,remote:a};this.disableForm(!0),await F.a.post(ke.a.mkdir,n),this.disableForm(!1),this.toggle(),U.b.info("Folder created: ".concat(a)),this.props.getFilesForContainerID(this.props.containerID)}catch(n){this.disableForm(!1),n.response?U.b.error("Error creating folder: ".concat(n.response.data.error)):U.b.error("Error creating folder: ".concat(n))}}handleSubmit(e){e.preventDefault(),this.createNewFolder()}toggle(){this.props.closeModal()}render(){const{name:e,disableForm:t}=this.state,{isVisible:a,currentPath:r}=this.props;return n.a.createElement(x.a,{isOpen:a,toggle:this.toggle,"data-test":"newFolderComponent"},n.a.createElement(Ce.a,{onSubmit:this.handleSubmit},n.a.createElement(oe.a,{toggle:this.toggle},"Create New folder at ",r.remoteName,": ",r.remotePath),n.a.createElement(le.a,null,n.a.createElement(Ae.a,{row:!0},n.a.createElement(ye.a,{for:"folderName",sm:5},"Enter the name"),n.a.createElement(s.a,{sm:7},n.a.createElement(se.a,{type:"text",name:"folderName",id:"folderName",value:e,onChange:this.changeName,required:!0,autoFocus:!0}))),n.a.createElement("div",{className:"clearfix"},n.a.createElement(l.a,{type:"submit",color:"success",className:"float-right",disabled:t},n.a.createElement("i",{className:"fa fa-check fa-lg"}),"Create folder")))))}}var we=Object(i.b)((e,t)=>{const a=e.explorer.currentPaths[t.containerID];let r={};return a&&e.remote.configs&&e.remote.configs[a.remoteName]&&(r=e.remote.configs[a.remoteName]),{currentPath:a,fsInfo:r}},{getFilesForContainerID:c.h})(Fe);var Se=a(358),De=a(635),Re=a.n(De),Pe=a(343),Oe=a(659);var ve=e=>{const{onDrop:t}=e,[{canDrop:a,isOver:r},o]=Object(Oe.a)({accept:[Pe.b.FILE],drop(a,r){t&&t(e,r)},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}),l=a&&r;return n.a.createElement("div",{ref:o},l&&n.a.createElement(pe,null),e.children)},Ue=a(656);var xe=e=>{const{currentPath:t}=e,[a,i]=Object(r.useState)(!1),[c,m]=Object(r.useState)(null),[d,h]=Object(r.useState)(!1),u=()=>i(!a),p=Object(r.useCallback)((e,t)=>{t&&m(t.getItem().files)},[]);return n.a.createElement("div",{"data-test":"fileUploadModalComponent"},n.a.createElement(l.a,{className:"btn-explorer-action h-100",id:"UploadButton",onClick:u},n.a.createElement("i",{className:"fa fa-lg fa-upload"})),n.a.createElement(Ie.a,{placement:"right",target:"UploadButton"},"Upload file(s)"),n.a.createElement(x.a,{isOpen:a,toggle:u},n.a.createElement(Ue.a,{backend:Pe.a},n.a.createElement(oe.a,{toggle:u},"New Mount"),n.a.createElement(le.a,null,n.a.createElement(k.a,{fluid:!0},n.a.createElement(ve,{onDrop:p},c?n.a.createElement(o.a,null,n.a.createElement(S.a,null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Size"))),n.a.createElement("tbody",null,(()=>{let e=[];for(let t=0;t<c.length;t++)e.push(n.a.createElement("tr",null,n.a.createElement("td",null,c[t].name),n.a.createElement("td",null,-1===c[t].size?"-":Object(v.g)(c[t].size,2))));return e})()))):n.a.createElement(o.a,{className:"upload-box"},n.a.createElement(s.a,{sm:3}),n.a.createElement(s.a,{sm:6},n.a.createElement("label",{htmlFor:"upload-file"},n.a.createElement(o.a,null,n.a.createElement("i",{className:"fa fa-lg fa-plus mx-auto mt-5"}),n.a.createElement("p",{className:"text-center mt-2"},"Click here or drag and drop files to upload")))),n.a.createElement(s.a,{sm:3})),n.a.createElement(o.a,null,n.a.createElement(Ae.a,{row:!0,className:"pl-2 pr-2 d-none"},n.a.createElement(se.a,{id:"upload-file",type:"file",name:"file",onChange:e=>{m(e.target.files)},multiple:!0})))))),n.a.createElement(ie.a,null,n.a.createElement(l.a,{"data-test":"ok-button",color:"primary",onClick:e=>{const a=new FormData;for(let t=0;t<c.length;t++){let e=c[t];a.append("file"+t,e)}h(!0),F.a.post("operations/uploadfile?fs="+"".concat(Object(v.a)(t.remoteName))+"&remote=".concat(t.remotePath),a).then(e=>{h(!1),m(null),u(),U.b.info("File uploaded successfully")},e=>{h(!1),U.b.error("File upload failed")})},disabled:!c||d},d?"Uploading":"Upload")," ",n.a.createElement(l.a,{"data-test":"cancel-button",color:"secondary",onClick:u},"Cancel")))))};function Me(e){const{remoteName:t,remotePath:a}=e;return"".concat(t,":/").concat(a)}class Be extends n.a.Component{constructor(e){super(e),this.openNewFolderModal=()=>{const{fsInfo:e}=this.props;e&&e.Features&&e.Features.CanHaveEmptyDirectories?this.setState({newFolderModalIsVisible:!0}):U.b.error("This remote cannot have empty directories")},this.closeNewFolderModal=()=>{this.setState({newFolderModalIsVisible:!1})},this.handleChangeFilter=e=>{const t=e.target.value,{changeVisibilityFilter:a}=this.props;a(this.props.containerID,t)},this.handleChangeGridMode=()=>{const{gridMode:e,changeGridMode:t,containerID:a}=this.props;t(a,"list"===e?"card":"list")},this.changeSearch=e=>{e.preventDefault();const{containerID:t,setSearchQuery:a}=this.props;a(t,e.target.value)},this.toggleDropDown=()=>{this.setState(e=>({dropdownOpen:!e.dropdownOpen}))},this.toggleAboutModal=()=>{const{fsInfo:e}=this.props;e&&e.Features&&e.Features.About?this.setState(e=>({isAboutModalOpen:!e.isAboutModalOpen}),()=>{if(this.state.isAboutModalOpen){const{containerID:e}=this.props;this.props.getAboutRemote(e)}}):U.b.error("This remote does not support About")},this.handleCleanTrash=()=>{const{fsInfo:e}=this.props;if(e&&e.Features&&e.Features.CleanUp){if(window.confirm("Are you sure you want to clear the trash. This operation cannot be undone")){const{currentPath:e,containerID:t}=this.props;let{remoteName:a}=e;Object(he.cleanTrashForRemote)(a).then(e=>{200===e.status&&(Object(U.b)("Trash Cleaned"),this.props.getAbout(t))},e=>{U.b.error("Error clearing trash "+e)})}}else U.b.error("Clearing trash is not allowed on this remote")},this.changeLoadMedia=e=>{e.stopPropagation();const{setLoadImages:t,containerID:a,loadImages:r}=this.props;t(a,!r)},this.handleSearchOpen=()=>{const{containerID:e}=this.props;this.setState(t=>(t.searchOpen&&this.props.setSearchQuery(e,""),{searchOpen:!t.searchOpen}))},this.onChangeTrial=e=>this.setState({tempUrl:e.target.value}),this.onFocusHandle=e=>this.setState({isUrlBarFocused:!0,tempUrl:Me(this.props.currentPath)}),this.onBlurHandle=e=>this.setState({isUrlBarFocused:!1,tempUrl:Me(this.props.currentPath)}),this.onSubmitUrlChange=e=>{e.preventDefault();const{changePath:t,containerID:a,currentPath:r}=this.props,{tempUrl:n}=this.state;let o=n.split(":/");o&&o[0]&&(r.remoteName!==o[0]||r.remotePath!==o[1])&&t(a,o[0],o[1])},this.state={newFolderModalIsVisible:!1,isAboutModalOpen:!1,dropdownOpen:!1,searchOpen:!1,tempUrl:Me(e.currentPath),isUrlBarFocused:!1},this.filterOptions=B.i}componentDidUpdate(e,t,a){e.currentPath!==this.props.currentPath&&this.setState({tempUrl:Me(this.props.currentPath)})}render(){const{containerID:e,getFilesForContainerID:t,gridMode:a,navigateFwd:r,navigateBack:i,searchQuery:c,currentPath:m,doughnutData:d}=this.props,{newFolderModalIsVisible:h,dropdownOpen:u,isAboutModalOpen:p,searchOpen:g,tempUrl:E,isUrlBarFocused:f}=this.state,{remoteName:b}=m;return n.a.createElement("div",{className:"pl-0 mt-3 mb-1 d-flex justify-content-between align-items-center",style:{marginLeft:"-15px",marginRight:"-15px"}},n.a.createElement("div",{className:"d-flex flex-nowrap"},n.a.createElement(l.a,{color:"light",className:"mr-1 btn-explorer-action",onClick:()=>i(e)},n.a.createElement("i",{className:"fa fa-lg fa-arrow-left"})),n.a.createElement(l.a,{color:"light",className:"mr-1 btn-explorer-action",onClick:()=>r(e)},n.a.createElement("i",{className:"fa fa-lg fa-arrow-right"})),n.a.createElement(l.a,{className:"mr-1 btn-explorer-action",id:"RefreshButton",onClick:()=>t(e)},n.a.createElement("i",{className:"fa fa-lg fa-repeat"})),n.a.createElement(Ie.a,{placement:"right",target:"RefreshButton"},"Refresh Files")),n.a.createElement("div",{className:"flex-grow-1 pl-1 pr-1 pr-lg-3 pl-lg-3"},n.a.createElement(Ce.a,{inline:!0,onSubmit:this.onSubmitUrlChange,className:"h-100"},n.a.createElement(se.a,{style:{width:"100%"},value:E,onChange:this.onChangeTrial,onFocus:this.onFocusHandle,onBlur:this.onBlurHandle}),n.a.createElement(l.a,{className:f?"":"d-none",color:"link",type:"submit",style:{marginLeft:"-45px"}},n.a.createElement("i",{className:"fa fa-arrow-right"})))),n.a.createElement("div",{className:"d-flex flex-wrap"},n.a.createElement(l.a,{className:"mr-1 btn-explorer-action p-1",id:"CreateFolderButton",onClick:this.openNewFolderModal},n.a.createElement("img",{src:Re.a,alt:"New Folder",className:"fa fa-lg"})," "),n.a.createElement(Ie.a,{placement:"bottom",target:"CreateFolderButton"},"Create a new Folder"),n.a.createElement(Ne.a,{isOpen:u,toggle:this.toggleDropDown,direction:"down",id:"FilterButton"},n.a.createElement(z.a,{className:"btn-explorer-action"},n.a.createElement("i",{className:"fa fa-lg fa-filter"})),n.a.createElement(K.a,null,n.a.createElement(W.a,{key:"None",value:"",onClick:this.handleChangeFilter},"None"),this.filterOptions.map((e,t)=>n.a.createElement(W.a,{key:e,value:e,onClick:this.handleChangeFilter},e)))),n.a.createElement(l.a,{className:"btn-explorer-action",id:"ListViewButton",onClick:this.handleChangeGridMode},n.a.createElement("i",{className:"fa fa-lg "+("card"===a?"fa-list":"fa-th-large")})),n.a.createElement(Ie.a,{placement:"right",target:"ListViewButton"},"card"===a?"List View":"Card View"),n.a.createElement(l.a,{className:"btn-explorer-action",id:"InfoButton",onClick:this.toggleAboutModal},n.a.createElement("i",{className:"fa fa-lg fa-info"})),n.a.createElement(Ie.a,{placement:"right",target:"InfoButton"},"Show Remote Info"),n.a.createElement(xe,{currentPath:m,buttonLabel:"Upload",buttonClass:"btn-explorer-action"}),n.a.createElement(Ce.a,{inline:!0},n.a.createElement(Ae.a,null,g&&n.a.createElement(se.a,{type:"text",placeholder:"Search",value:c,className:"animate-fade-in",onChange:this.changeSearch}),n.a.createElement(l.a,{color:"",className:"mr-1 btn-explorer-action",onClick:this.handleSearchOpen},n.a.createElement("i",{className:"fa fa-lg "+(g?"fa-close":"fa-search")})))),n.a.createElement(we,{containerID:e,isVisible:h,closeModal:this.closeNewFolderModal}),n.a.createElement(x.a,{isOpen:p,toggle:this.toggleAboutModal},n.a.createElement(oe.a,null,"Status for ",b),n.a.createElement(le.a,null,n.a.createElement(o.a,null,n.a.createElement(s.a,{sm:12},n.a.createElement("div",{className:"chart-wrapper"},n.a.createElement("p",null,"Space Usage (in GB)"),d&&!Object(v.j)(d)?n.a.createElement(Se.Doughnut,{data:d}):n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,{color:"primary"}),"Loading")))),n.a.createElement(o.a,null,n.a.createElement(s.a,{sm:12},n.a.createElement(l.a,{color:"danger",onClick:this.handleCleanTrash},"Clean Trash ",n.a.createElement("i",{className:"fa fa-lg fa-trash"}))))),n.a.createElement(ie.a,null))))}}const je=Object(ue.a)((e,t)=>t.containerID,(e,t)=>e.providerStatus.about[t.containerID],(e,t)=>{if(!t)return{};let a=[],r=[];for(const[n,o]of Object.entries(t))"total"!==n&&(a.push(n),r.push(Object(v.b)(o).toFixed(2)));return a.length>1&&r.length>1?{labels:a,datasets:[{data:r,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#ff7459"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#ff7459"]}]}:{}}),Te=Object(ue.a)((e,t)=>t.containerID,(e,t)=>e.explorer.currentPaths[t.containerID],(e,t)=>e.remote.configs,(e,t,a)=>t&&a&&a[t.remoteName]?a[t.remoteName]:{});var Le=Object(i.b)((e,t)=>{let a=je(e,t),r=Te(e,t);return{visibilityFilter:e.explorer.visibilityFilters[t.containerID],loadImages:e.explorer.loadImages[t.containerID],currentPath:e.explorer.currentPaths[t.containerID],gridMode:e.explorer.gridMode[t.containerID],searchQuery:e.explorer.searchQueries[t.containerID],fsInfo:r,doughnutData:a,numCols:e.remote.numCols}},{changeVisibilityFilter:c.f,changeGridMode:c.a,navigateBack:c.i,navigateFwd:c.j,getFilesForContainerID:c.h,setSearchQuery:c.n,getAboutRemote:e=>(t,a)=>{const r=a().explorer.currentPaths[e];let{remoteName:n}=r;n&&(Object(v.k)(n)||(n=Object(v.a)(n)),t({type:J.z,status:J.L,id:e,payload:{}}),F.a.post(ke.a.getAbout,{fs:n}).then(a=>{t({type:J.z,status:J.L,id:e,payload:a.data})},a=>{t({type:J.z,status:J.J,id:e,error:a})}))},setLoadImages:c.m,changePath:c.b})(Be),Ve=a(345);class Qe extends n.a.Component{constructor(e){super(e),this.handleChangeRemoteName=e=>{const{changeRemoteName:t,containerID:a,getFsInfo:r}=this.props;t(a,e),r(e)},this.state={remoteNameTemp:""},this.updateRemoteName=this.updateRemoteName.bind(this),this.updateRemotePath=this.updateRemotePath.bind(this)}updateRemoteName(e){this.setState({remoteNameTemp:e})}updateRemotePath(e,t,a){const{remoteName:r}=this.props.currentPath;let n="",o="";a?(n=Object(v.a)(r)+e,o=""):t&&(n=r,o=e),this.props.changePath(this.props.containerID,n,o)}render(){const{remoteName:e}=this.props.currentPath,{containerID:t,className:a}=this.props,r=e&&""!==e;return n.a.createElement(d.a,null,n.a.createElement(A.a,{className:a},n.a.createElement(y.a,null,n.a.createElement(k.a,{fluid:!0},r?n.a.createElement(n.a.Fragment,null,n.a.createElement(Le,{containerID:t}),n.a.createElement(be,{containerID:t})):n.a.createElement(Ve.a,{remoteName:e,containerID:t,handleChangeRemoteName:this.handleChangeRemoteName})))))}}Qe.defaultProps={};var Je=Object(i.b)((e,t)=>{const a=e.explorer.currentPaths[t.containerID];let r={};const{remoteName:n}=a;if(a&&e.remote.configs){const t=n.split(":")[0];e.remote.configs[t]&&(r=e.remote.configs[t])}return{configs:e.remote.configs,hasError:e.remote.hasError,error:e.remote.error,currentPath:a,fsInfo:r}},{createPath:c.g,changePath:c.b,changeRemoteName:c.c,changeRemotePath:c.d,navigateUp:c.k,navigateBack:c.i,navigateFwd:c.j,getFsInfo:m.f})(Qe);var He=e=>{let{numCols:t,activeRemoteContainerID:a,distractionFreeMode:r,containers:l}=e,i=[];const c=12/t;for(let m=0;m<t;m++)i.push(n.a.createElement(s.a,{lg:c,key:m},n.a.createElement(o.a,null,n.a.createElement(s.a,{lg:12},n.a.createElement(N,{paneID:m}))),l.map(e=>{let{ID:t,paneID:o}=e;return o===m?n.a.createElement(Je,{containerID:t,key:t,className:a&&a[m]&&a[m]!==t?"d-none":"",distractionFreeMode:r}):null})));return i};class Ze extends n.a.Component{constructor(){super(...arguments),this.changeLayout=(e,t)=>{const{changeNumCols:a}=this.props;e!==a&&a(e,t)},this.toggleDistractionFreeMode=e=>{const{distractionFreeMode:t,changeDistractionFreeMode:a}=this.props;a(!t)}}componentDidMount(){const{numContainers:e,addRemoteContainer:t}=this.props;e<1&&t(0)}render(){const{numCols:e,distractionFreeMode:t,activeRemoteContainerID:a,containers:r}=this.props;return n.a.createElement(d.a,null,n.a.createElement(Ue.a,{backend:Pe.a},n.a.createElement(o.a,{className:"d-none d-md-block","data-test":"remoteExplorerLayout"},t&&n.a.createElement("div",{className:"clearfix float-right"},n.a.createElement(l.a,{color:"success",className:"ml-2",onClick:this.toggleDistractionFreeMode},n.a.createElement("i",{className:"fa fa-arrows"}))),!t&&n.a.createElement(s.a,{sm:12,lg:12,className:"mb-3 d-none d-md-block"},n.a.createElement("span",{className:"text-choose-layout"},"Choose Layout: ","  "),n.a.createElement(l.a,{color:"primary",className:"ml-2 layout-change-button",onClick:()=>this.changeLayout(1,"horizontal")},n.a.createElement("img",{style:{height:24},src:u.a,alt:"Single Vertical Pane"})),n.a.createElement(l.a,{color:"primary",className:"ml-2 layout-change-button",onClick:()=>this.changeLayout(2,"horizontal")},n.a.createElement("img",{style:{height:24},src:g.a,alt:"Double Vertical Pane"})),n.a.createElement(l.a,{color:"primary",className:"ml-2 layout-change-button",onClick:()=>this.changeLayout(3,"horizontal")},n.a.createElement("img",{style:{height:24},src:f.a,alt:"Triple Vertical Pane"})),n.a.createElement(l.a,{color:"success",className:"ml-2",onClick:this.toggleDistractionFreeMode},n.a.createElement("i",{className:"fa fa-arrows"})," Full Screen"))),n.a.createElement(o.a,null,n.a.createElement(He,{numCols:e,distractionFreeMode:t,activeRemoteContainerID:a,containers:r}))))}}t.default=Object(i.b)(e=>({backStacks:e.explorer.backStacks,numCols:e.remote.numCols,numContainers:e.remote.numContainers,distractionFreeMode:e.remote.distractionFreeMode,splitMode:e.remote.splitMode,activeRemoteContainerID:e.remote.activeRemoteContainerID,containers:e.remote.containers}),{createPath:c.g,changeNumCols:m.d,changeDistractionFreeMode:m.c,addRemoteContainer:m.a})(Ze)}}]);
//# sourceMappingURL=11.b20ff6f9.chunk.js.map