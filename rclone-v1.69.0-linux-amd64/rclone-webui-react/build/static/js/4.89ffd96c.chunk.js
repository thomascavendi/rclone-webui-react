(this["webpackJsonp@rclone/rclone-webui-react"]=this["webpackJsonp@rclone/rclone-webui-react"]||[]).push([[4],{357:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(306),s=a(548),c=a(307),o=a(296),i=a(27),d=a.n(i),u=a(417),m=a(87),p=a(374),b=a(35);function g(){return d.a.createPortal(r.a.createElement(u.a,{mode:"modal"}),document.getElementById(b.e))}class E extends r.a.Component{constructor(){super(...arguments),this.toggleCheckStatus=()=>{const{checkStatus:e,enableCheckStatus:t}=this.props;console.log(e,t),t(!e)}}componentDidMount(){this.props.getStatus(),this.refreshInterval=setInterval(()=>this.props.getStatus(),b.g)}componentWillUnmount(){clearInterval(this.refreshInterval)}render(){const{isConnected:e,mode:t,checkStatus:a}=this.props,n=localStorage.getItem(b.c),i=localStorage.getItem(b.h);return"card"===t?r.a.createElement(l.a,{className:"text-center "+(e?"card-accent-info":"card-accent-warning")},r.a.createElement(s.a,null,"Overview"),r.a.createElement(c.a,null,r.a.createElement(h,{checkStatus:a,connectivityStatus:e,ipAddress:n,userName:i}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{type:"primary",onClick:this.toggleCheckStatus,className:e?"bg-info  d-none d-lg-block":"bg-warning d-none d-lg-block"}," ",a?e?"CONNECTED":"DISCONNECTED":"DISABLED"),r.a.createElement(g,null))}}function h(e){let{connectivityStatus:t,checkStatus:a,ipAddress:n,userName:l}=e,s="";return s=a?t?"rClone Backend is connected and working as expected":"Cannot connect to rclone backend. There is a problem with connecting to {ipAddress}.":"Not monitoring connectivity status. Tap the icon in navbar to start.",r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("span",{className:"card-subtitle"},"Status: "," "),r.a.createElement("span",{className:"card-text"},s)),r.a.createElement("p",null,r.a.createElement("span",{className:"card-subtitle"},"Current IP Address: "," "),r.a.createElement("span",{className:"card-text"},n)),r.a.createElement("p",null,r.a.createElement("span",{className:"card-subtitle"},"Username: "," "),r.a.createElement("span",{className:"card-text"},l)))}E.defaultProps={mode:"card"};t.a=Object(m.b)(e=>({isConnected:e.status.isConnected,isDisabled:e.status.isDisabled,checkStatus:e.status.checkStatus}),{getStatus:p.c,enableCheckStatus:p.a})(E)},374:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return o}));var n=a(2),r=a(284);const l=()=>async(e,t)=>{const{status:a}=t();a.checkStatus&&Object(r.getStats)().then(t=>e({type:n.s,status:n.L,payload:t}),t=>e({type:n.s,status:n.J,payload:t}))},s=e=>async t=>{t({type:n.r,payload:e})},c=()=>async e=>{Object(r.getCurrentBandwidthSetting)().then(t=>e({type:n.t,status:n.L,payload:t}),t=>e({type:n.t,status:n.J,payload:t}))},o=e=>async t=>{Object(r.setCurrentBandwidthSetting)(e).then(e=>t({type:n.M,status:n.L,payload:e}),e=>t({type:n.M,status:n.J,payload:e}))}},417:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(306),s=a(548),c=a(307),o=a(5),i=a(88),d=a(6),u=a(3),m=a.n(u),p=a(34),b=a.n(p),g=a(26),E=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"];function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={children:m.a.node,bar:m.a.bool,multi:m.a.bool,tag:g.q,value:m.a.oneOfType([m.a.string,m.a.number]),min:m.a.oneOfType([m.a.string,m.a.number]),max:m.a.oneOfType([m.a.string,m.a.number]),animated:m.a.bool,striped:m.a.bool,color:m.a.string,className:m.a.string,barClassName:m.a.string,cssModule:m.a.object,style:m.a.object,barStyle:m.a.object,barAriaValueText:m.a.string,barAriaLabelledBy:m.a.string},v=function(e){var t=e.children,a=e.className,n=e.barClassName,l=e.cssModule,s=e.value,c=e.min,i=e.max,u=e.animated,m=e.striped,p=e.color,h=e.bar,y=e.multi,v=e.tag,O=e.style,N=e.barStyle,j=e.barAriaValueText,S=e.barAriaLabelledBy,C=Object(d.a)(e,E),x=Object(g.s)(s)/Object(g.s)(i)*100,T=Object(g.m)(b()(a,"progress"),l),k={className:Object(g.m)(b()("progress-bar",h&&a||n,u?"progress-bar-animated":null,p?"bg-"+p:null,m||u?"progress-bar-striped":null),l),style:f(f(f({},h?O:{}),N),{},{width:x+"%"}),role:"progressbar","aria-valuenow":s,"aria-valuemin":c,"aria-valuemax":i,"aria-valuetext":j,"aria-labelledby":S,children:t};return h?r.a.createElement(v,Object(o.a)({},C,k)):r.a.createElement(v,Object(o.a)({},C,{style:O,className:T}),y?t:r.a.createElement("div",k))};v.propTypes=y,v.defaultProps={tag:"div",value:0,min:0,max:100,style:{},barStyle:{}};var O=v,N=a(62),j=a(43),S=a(272),C=a(296),x=a(549),T=a(63),k=a(87),w=a(358),P=a(547),D=a(64),A=a(45),I=a(36);const B={tooltips:{enabled:!1,custom:P.CustomTooltips},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{ticks:{display:!1}}]}};function L(e){let{job:t}=e;const{name:a,eta:n,percentage:o,speed:i,speedAvg:d,size:u,bytes:m}=t;return a&&!isNaN(i)?r.a.createElement(l.a,null,r.a.createElement(s.a,null,"Running Jobs"),r.a.createElement(c.a,null,r.a.createElement("p",null,a)," ",r.a.createElement(O,{value:o,className:"mb-2"},o," %")," ",r.a.createElement("p",null,r.a.createElement("strong",null,"Speed: "),Object(T.g)(i),"PS")," ",r.a.createElement("p",null,r.a.createElement("strong",null,"Average Speed: "),Object(T.g)(d),"PS")," ",r.a.createElement("p",null,r.a.createElement("strong",null,"Total transferred: "),Object(T.g)(m))," ",r.a.createElement("p",null,r.a.createElement("strong",null,"Size: "),Object(T.g)(u)),r.a.createElement("p",null,r.a.createElement("strong",null,"ETA: "),Object(T.m)(n)))):null}function H(e){let{job:t}=e;const{name:a,percentage:n,speedAvg:l,size:s}=t;return console.log("Job:"+t),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:"runningJobs"},s&&l?r.a.createElement(j.a,{lg:12,className:"itemName"}," ",function(e){if(e.length>30){return e.substr(0,30)+" ... "+e.substr(-5)}return e}(a)," "," ","(",Object(T.g)(s),") - ",Object(T.g)(l),"PS "):r.a.createElement(j.a,{lg:12},"Calculating")),r.a.createElement(N.a,null,r.a.createElement(j.a,{lg:12},r.a.createElement(O,{value:n,className:"mb-2"},n," %"))))}function M(e){let{stats:t}=e;const{speed:a,bytes:n,checks:o,elapsedTime:i,deletes:d,errors:u,transfers:m,lastError:p}=t;return r.a.createElement(l.a,null,r.a.createElement(s.a,null,r.a.createElement("strong",null,"Global Stats")),r.a.createElement(c.a,null,r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"card-subtitle"},"Bytes Transferred:"),r.a.createElement("td",{className:"card-text"},Object(T.g)(n))),r.a.createElement("tr",null,r.a.createElement("td",{className:"card-subtitle"},"Average Speed:"),r.a.createElement("td",{className:"card-text"},Object(T.g)(a),"PS")),r.a.createElement("tr",null,r.a.createElement("td",{className:"card-subtitle"},"Checks:"),r.a.createElement("td",{className:"card-text"},o)),r.a.createElement("tr",null,r.a.createElement("td",{className:"card-subtitle"},"Deletes:"),r.a.createElement("td",{className:"card-text"},d)),r.a.createElement("tr",null,r.a.createElement("td",{className:"card-subtitle"},"Running since:"),r.a.createElement("td",{className:"card-text"},Object(T.m)(i))),r.a.createElement("tr",{className:u>0?"table-danger":""},r.a.createElement("td",{className:"card-subtitle"},"Errors:"),r.a.createElement("td",{className:"card-text"},u)),r.a.createElement("tr",null,r.a.createElement("td",{className:"card-subtitle"},"Transfers:"),r.a.createElement("td",{className:"card-text"},m)),r.a.createElement("tr",null,r.a.createElement("td",{className:"card-subtitle"},"Last Error:"),r.a.createElement("td",{className:"card-text"},p))))))}function R(e){let{transferring:t}=e;return void 0!==t?t.map((e,t)=>r.a.createElement(L,{key:e.name,job:e})):null}function J(e){let{transferring:t}=e;if(void 0!==t){const e=Object(T.i)(t,e=>e.group),a=[];return e.forEach((e,t)=>{a.push(r.a.createElement(_,{job:e,groupId:t,key:t}))}),a}return null}function _(e){let{job:t,groupId:a}=e;const[o,i]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!0);return t?r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(l.a,null,r.a.createElement(s.a,{onClick:()=>i(!o)},r.a.createElement(S.a,null,r.a.createElement(N.a,null,r.a.createElement(j.a,{sm:10},"Transferring ",t.length," file(s)"),r.a.createElement(j.a,{sm:2},r.a.createElement(C.a,{color:"light",disabled:!d,onClick:e=>((e,t)=>{if(e.stopPropagation(),t&&-1!==t.indexOf("/")){u(!1);const e=t.split("/")[1];D.a.post(A.a.stopJob,{jobid:e,_async:!0}).then((function(t){I.b.info("Job ".concat(e," stopped"))})).catch(t=>{I.b.error("Job ".concat(e," couldn't be stopped"))})}})(e,a),className:"btn-outline-danger btn-pill"},r.a.createElement("i",{className:"fa fa-close fa-sm"})))))),r.a.createElement(x.a,{isOpen:o},r.a.createElement(c.a,null,t.map((e,t)=>r.a.createElement(H,{key:e.name,job:e})))))):null}class V extends r.a.Component{constructor(e,t){super(e,t),this.toggleShowing=()=>{this.setState(e=>({isShowing:!e.isShowing}))},this.state={isShowing:!0}}render(){const{jobs:e,isConnected:t,lineChartData:a}=this.props,{transferring:n}=e,{mode:o}=this.props;return"full-status"===o?t?r.a.createElement(N.a,null,r.a.createElement(j.a,{sm:12,lg:6},r.a.createElement(M,{stats:e})),r.a.createElement(j.a,{sm:12,lg:6},r.a.createElement(l.a,null,r.a.createElement(s.a,null,"Speed"),r.a.createElement(c.a,null,r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement(w.Line,{data:a,options:B}))))),r.a.createElement(j.a,{sm:12,lg:4},r.a.createElement(R,{transferring:n}))):r.a.createElement("div",null,"Not connected to rclone."):"card"===o?t?r.a.createElement(J,{transferring:n}):r.a.createElement("div",null,"Not connected to rclone."):"modal"===o?n&&n.length>0?r.a.createElement(l.a,{className:"progress-modal d-none d-sm-block"},r.a.createElement(s.a,{onClick:()=>this.toggleShowing()},"Progress",r.a.createElement("div",{className:"card-header-actions"},r.a.createElement(C.a,{color:"link"},r.a.createElement("i",{className:"fa fa-close fa-lg"})))),r.a.createElement(c.a,{className:this.state.isShowing?"progress-modal-body":"d-none",style:{overflowY:"scroll"}},r.a.createElement(J,{transferring:n}))):null:void 0}}t.a=Object(k.b)((e,t)=>{const a=e.status.speed;let n={};if(a){let e=[],t=[],r=[];const l=a.length;a.slice(l-50,l-1).forEach((a,n)=>{e.push(Math.ceil(a.elapsedTime)),t.push(Object(T.c)(a.speed).toFixed(2)),r.push(Object(T.c)(a.speedAvg).toFixed(2))}),n={labels:e,datasets:[{label:"Speed (kbps)",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:t},{label:"Average Speed (kbps)",fill:!0,lineTension:.1,backgroundColor:"rgba(187,69,14,0.4)",borderColor:"rgb(192,76,58)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(187,69,14)",pointBackgroundColor:"#ff7459",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:r}]}}return{jobs:e.status.jobs,isConnected:e.status.isConnected,error:e.status.error,lineChartData:n}},{})(V)},547:function(e,t,a){!function(e){"use strict";function t(e){var t=this,a="above",n="below",r="chartjs-tooltip",l="no-transform",s="tooltip-body",c="tooltip-body-item",o="tooltip-body-item-color",i="tooltip-body-item-label",d="tooltip-body-item-value",u="tooltip-header",m="tooltip-header-item",p={DIV:"div",SPAN:"span",TOOLTIP:(this._chart.canvas.id||function(){var e=function(){return(65536*(1+Math.random())|0).toString(16)},a="_canvas-"+(e()+e());return t._chart.canvas.id=a,a}())+"-tooltip"},b=document.getElementById(p.TOOLTIP);if(b||((b=document.createElement("div")).id=p.TOOLTIP,b.className=r,this._chart.canvas.parentNode.appendChild(b)),0!==e.opacity){if(b.classList.remove(a,n,l),e.yAlign?b.classList.add(e.yAlign):b.classList.add(l),e.body){var g=e.title||[],E=document.createElement(p.DIV);E.className=u,g.forEach((function(e){var t=document.createElement(p.DIV);t.className=m,t.innerHTML=e,E.appendChild(t)}));var h=document.createElement(p.DIV);h.className=s,e.body.map((function(e){return e.lines})).forEach((function(t,a){var n=document.createElement(p.DIV);n.className=c;var r=e.labelColors[a],l=document.createElement(p.SPAN);if(l.className=o,l.style.backgroundColor=r.backgroundColor,n.appendChild(l),t[0].split(":").length>1){var s=document.createElement(p.SPAN);s.className=i,s.innerHTML=t[0].split(": ")[0],n.appendChild(s);var u=document.createElement(p.SPAN);u.className=d,u.innerHTML=t[0].split(": ").pop(),n.appendChild(u)}else{var m=document.createElement(p.SPAN);m.className=d,m.innerHTML=t[0],n.appendChild(m)}h.appendChild(n)})),b.innerHTML="",b.appendChild(E),b.appendChild(h)}var f=this._chart.canvas.getBoundingClientRect(),y=this._chart.canvas.offsetTop,v=this._chart.canvas.offsetLeft+e.caretX,O=y+e.caretY,N=e.width/2;v+N>f.width?v-=N:v<N&&(v+=N),b.style.opacity=1,b.style.left=v+"px",b.style.top=O+"px"}else b.style.opacity=0}var a=t;e.CustomTooltips=t,e.customTooltips=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)},549:function(e,t,a){"use strict";var n,r=a(5),l=a(6),s=a(276),c=a(13),o=a(88),i=a(0),d=a.n(i),u=a(3),m=a.n(u),p=a(34),b=a.n(p),g=a(308),E=a(26),h=["tag","isOpen","className","navbar","cssModule","children","innerRef"];function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v=y(y({},g.Transition.propTypes),{},{isOpen:m.a.bool,children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:E.q,className:m.a.node,navbar:m.a.bool,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object])}),O=y(y({},g.Transition.defaultProps),{},{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:E.e.Collapse}),N=((n={})[E.d.ENTERING]="collapsing",n[E.d.ENTERED]="collapse show",n[E.d.EXITING]="collapsing",n[E.d.EXITED]="collapse",n);function j(e){return e.scrollHeight}var S=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((function(e){a[e]=a[e].bind(Object(s.a)(a))})),a}Object(c.a)(t,e);var a=t.prototype;return a.onEntering=function(e,t){this.setState({height:j(e)}),this.props.onEntering(e,t)},a.onEntered=function(e,t){this.setState({height:null}),this.props.onEntered(e,t)},a.onExit=function(e){this.setState({height:j(e)}),this.props.onExit(e)},a.onExiting=function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)},a.onExited=function(e){this.setState({height:null}),this.props.onExited(e)},a.render=function(){var e=this,t=this.props,a=t.tag,n=t.isOpen,s=t.className,c=t.navbar,o=t.cssModule,i=t.children,u=(t.innerRef,Object(l.a)(t,h)),m=this.state.height,p=Object(E.o)(u,E.c),f=Object(E.n)(u,E.c);return d.a.createElement(g.Transition,Object(r.a)({},p,{in:n,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(t){var n=function(e){return N[e]||"collapse"}(t),l=Object(E.m)(b()(s,n,c&&"navbar-collapse"),o),u=null===m?null:{height:m};return d.a.createElement(a,Object(r.a)({},f,{style:y(y({},f.style),u),className:l,ref:e.props.innerRef}),i)}))},t}(i.Component);S.propTypes=v,S.defaultProps=O,t.a=S}}]);
//# sourceMappingURL=4.89ffd96c.chunk.js.map